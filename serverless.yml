service: usrv-kpoints
frameworkVersion: "3"

provider:
  name: aws
  runtime: nodejs18.x
  lambdaHashingVersion: 20201221

functions:
  createTransaction:
    handler: src/createTransactionHandler.createTransaction
    events:
      - httpApi:
          path: /transaction/create
          method: post
#  processKushkiPoints:
#    handler: src/processKPointsHandler.processKPoints
#    events:
#      - stream:
#          type: dynamodb
#          batchSize: 1
#          startingPosition: LATEST
#          arn:
#            Fn::GetAtt:
#              - transactions
#              - StreamArn


plugins:
  - serverless-plugin-typescript

#resources:
#  Resources:
#    transactions:
#      Type: "AWS::DynamoDB::Table"
#      Properties:
#        TableName: qa-usrv-kpoints-card-transactions
#        AttributeDefinitions:
#          - AttributeName: transaction_id
#            AttributeType: S
#        KeySchema:
#          - AttributeName: transaction_id
#            KeyType: HASH
#        BillingMode: PAY_PER_REQUEST
#        StreamSpecification:
#          StreamViewType: NEW_AND_OLD_IMAGES

